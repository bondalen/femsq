-- ============================================================================
-- Вставка данных в таблицы системы ревизий
-- ============================================================================
-- Дата создания: 2026-01-12
-- Автор: Александр
-- Описание: Перенос данных из MS Access в таблицы ra_at, ra_dir, ra_a
-- ============================================================================

USE [femsq];
GO

-- Временно отключаем FK constraints для вставки данных
ALTER TABLE ags.ra_a NOCHECK CONSTRAINT ALL;
GO

-- ============================================================================
-- 1. Вставка в ags.ra_at (Типы ревизий)
-- ============================================================================

SET IDENTITY_INSERT ags.ra_at ON;
GO

INSERT INTO ags.ra_at (at_key, at_name, at_created, at_updated)
VALUES 
    (1, N'ревизия отчётов агента', GETDATE(), GETDATE());

SET IDENTITY_INSERT ags.ra_at OFF;
GO

PRINT 'Данные в ags.ra_at вставлены: 1 запись';
GO

-- ============================================================================
-- 2. Вставка в ags.ra_dir (Директории)
-- ============================================================================

SET IDENTITY_INSERT ags.ra_dir ON;
GO

INSERT INTO ags.ra_dir ([key], dir_name, dir, dir_created, dir_updated)
VALUES 
    (1, N'для проверки 20-го года', 
        N'X:\GRP\F644\All\УКПиУВРпоСО\Инф-я по ОА , Ввод 2018, 2019,2020,2021\2020', 
        GETDATE(), GETDATE()),
    
    (2, N'2020-инвест только', 
        N'D:\db\Ф644Д_20-1207', 
        GETDATE(), GETDATE()),
    
    (3, N'для проверки 20-го года по частям', 
        N'X:\GRP\F644\All\УКПиУВРпоСО\Инф-я по ОА , Ввод 2018, 2019,2020\2020', 
        GETDATE(), GETDATE()),
    
    (4, N'Для проверки 19-го года', 
        N'X:\GRP\F644\All\УКПиУВРпоСО\Инф-я по ОА , Ввод 2018, 2019,2020\2019', 
        GETDATE(), GETDATE()),
    
    (5, N'Для проверки 2021-го года', 
        N'X:\GRP\F644\All\УКПиУВРпоСО', 
        GETDATE(), GETDATE()),
    
    (6, N'Для проверки 2021-го года по частям', 
        N'X:\GRP\F644\All\УКПиУВРпоСО\Инф-я по ОА , Ввод 2018, 2019,2020,2021\2021', 
        GETDATE(), GETDATE()),
    
    (7, N'Для проверки 2018-го года', 
        N'X:\GRP\F644\All\УКПиУВРпоСО\Инф-я по ОА , Ввод 2018, 2019,2020\2018', 
        GETDATE(), GETDATE()),
    
    (8, N'Для проверки 2022-го года', 
        N'X:\GRP\F644\All\УКПиУВРпоСО', 
        GETDATE(), GETDATE()),
    
    (9, N'Для проверки 2023-го года', 
        N'X:\GRP\F644\All\УКПиУВРпоСО', 
        GETDATE(), GETDATE()),
    
    (10, N'Для проверки 2024-го года', 
        N'X:\GRP\F644\All\УКПиУВРпоСО', 
        GETDATE(), GETDATE()),
    
    (11, N'Для проверки 2025-го года', 
        N'X:\grp\F644\All\УКПиУВРпоСО', 
        GETDATE(), GETDATE());

SET IDENTITY_INSERT ags.ra_dir OFF;
GO

PRINT 'Данные в ags.ra_dir вставлены: 11 записей';
GO

-- ============================================================================
-- 3. Вставка в ags.ra_a (Ревизии)
-- ============================================================================
-- Примечание: Данные ra_a будут загружены через приложение, так как:
-- 1. HTML-результаты содержат очень длинные тексты
-- 2. Требуется дополнительная обработка данных
-- 3. Связи с другими таблицами требуют валидации
-- ============================================================================

PRINT 'Данные в ags.ra_a будут загружены через приложение';
GO

-- Включаем обратно FK constraints
ALTER TABLE ags.ra_a CHECK CONSTRAINT ALL;
GO

-- ============================================================================
-- Проверка вставленных данных
-- ============================================================================

PRINT '';
PRINT '============================================';
PRINT 'Проверка количества записей:';
PRINT '============================================';

SELECT COUNT(*) AS ra_at_count FROM ags.ra_at;
SELECT COUNT(*) AS ra_dir_count FROM ags.ra_dir;
SELECT COUNT(*) AS ra_a_count FROM ags.ra_a;

PRINT '';
PRINT 'Данные успешно перенесены!';
GO
