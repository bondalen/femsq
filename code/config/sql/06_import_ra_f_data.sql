-- ============================================================================
-- Импорт данных из CSV файлов в таблицы файлов ревизий
-- ============================================================================
-- Дата создания: 2026-01-15
-- Автор: Александр
-- Описание: SQL скрипт для импорта данных из экспортированных CSV файлов
-- ============================================================================

USE [FishEye];
GO

-- Временно отключаем FK constraints для вставки данных
ALTER TABLE ags.ra_f NOCHECK CONSTRAINT ALL;
ALTER TABLE ags.ra_ft_s NOCHECK CONSTRAINT ALL;
ALTER TABLE ags.ra_ft_sn NOCHECK CONSTRAINT ALL;
GO

-- ============================================================================
-- 1. Импорт ags.ra_ft_st (типы источников)
-- ============================================================================

SET IDENTITY_INSERT ags.ra_ft_st ON;
GO

-- Данные из CSV экспорта
INSERT INTO ags.ra_ft_st (st_key, st_name, st_created, st_updated) VALUES (1, N'сводный лист', GETDATE(), GETDATE());
INSERT INTO ags.ra_ft_st (st_key, st_name, st_created, st_updated) VALUES (2, N'лист отчётного периода', GETDATE(), GETDATE());
INSERT INTO ags.ra_ft_st (st_key, st_name, st_created, st_updated) VALUES (3, N'возврат', GETDATE(), GETDATE());
INSERT INTO ags.ra_ft_st (st_key, st_name, st_created, st_updated) VALUES (4, N'лист месяца', GETDATE(), GETDATE());
INSERT INTO ags.ra_ft_st (st_key, st_name, st_created, st_updated) VALUES (5, N'лист аренды', GETDATE(), GETDATE());
INSERT INTO ags.ra_ft_st (st_key, st_name, st_created, st_updated) VALUES (6, N'аг. вознаграждение. Лист актов', GETDATE(), GETDATE());
GO

SET IDENTITY_INSERT ags.ra_ft_st OFF;
GO

PRINT 'Данные в ags.ra_ft_st импортированы';
GO

-- ============================================================================
-- 2. Импорт ags.ra_ft_s (источники/листы)
-- ============================================================================
-- Примечание: Данные будут импортированы через Python скрипт или вручную
-- из-за большого количества записей (41 запись)
-- ============================================================================

-- ============================================================================
-- 3. Импорт ags.ra_ft_sn (имена источников)
-- ============================================================================
-- Примечание: Данные будут импортированы через Python скрипт или вручную
-- из-за большого количества записей (126 записей)
-- ============================================================================

-- ============================================================================
-- 4. Импорт ags.ra_f (файлы для проверки)
-- ============================================================================
-- Примечание: Данные будут импортированы через Python скрипт или вручную
-- из-за большого количества записей (138 записей)
-- ============================================================================

-- Включаем FK constraints обратно
ALTER TABLE ags.ra_f CHECK CONSTRAINT ALL;
ALTER TABLE ags.ra_ft_s CHECK CONSTRAINT ALL;
ALTER TABLE ags.ra_ft_sn CHECK CONSTRAINT ALL;
GO

PRINT 'Импорт данных завершён (частично - только ra_ft_st)';
PRINT 'Для полного импорта используйте Python скрипт 05_import_ra_f_data.py';
GO
