# План реализации конфигурационного сервиса FEMSQ

**Дата:** 2025-11-10  
**Автор:** Александр  
**Связанные задачи:** task:0004, task:0009

## Цели
- Подготовить базовую реализацию пакета `com.femsq.database.config`
- Обеспечить чтение и запись файла `~/.femsq/database.properties`
- Настроить единый подход к логированию операций конфигурации

## Приоритетные шаги
1. Создать класс `DatabaseConfigurationService` с методами `loadConfig()` и `saveConfig()`.
2. Реализовать `ConfigurationFileManager` для работы с файловой системой.
3. Реализовать `ConfigurationValidator` для проверки входных параметров.
4. Обеспечить покрытие unit-тестами критических сценариев (позитивный/ошибочный).

## Детализация методов
- `loadConfig()`
  - Проверяет наличие файла конфигурации (использует `ConfigurationFileManager`).
  - Загружает свойства, валидирует их через `ConfigurationValidator`.
  - Возвращает immutable-объект с параметрами подключения.
- `saveConfig(configuration)`
  - Валидирует входные данные.
  - Обновляет или создаёт файл конфигурации с безопасными правами.
  - Подтверждает успешное сохранение или выбрасывает информативное исключение.

## Логирование
- Использовать `org.slf4j.Logger`.
- Уровень `INFO` для успешного старта/окончания операций `loadConfig` и `saveConfig`.
- Уровень `WARN` для восстановимых проблем (не найден файл, создан заново).
- Уровень `ERROR` для исключений ввода-вывода и нарушений валидации.

## Следующие шаги
- Сгенерировать DTO для конфигурации (`DatabaseConfigurationProperties`).
- Разработать интеграцию с задачами по подключению (`task:0005`, `task:0010`).
- Обновить `project-development.json` и журнал после реализации.
