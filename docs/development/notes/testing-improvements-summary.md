# Предложения по совершенствованию системы тестов FEMSQ

**Дата:** 2025-11-13  
**Автор:** Александр

## Резюме предложений

### ✅ Реализовано

1. **Maven профили для разных типов тестов**
   - `unit` (по умолчанию) - только unit-тесты
   - `integration` - только integration-тесты
   - `ci` - все тесты + отчеты о покрытии

2. **Скрипты для удобного запуска**
   - `test-unit.sh` - unit-тесты
   - `test-integration.sh` - integration-тесты
   - `test-all.sh` - все тесты
   - `test-e2e.sh` - E2E-тесты

3. **GitHub Actions CI/CD**
   - Автоматический запуск unit-тестов при каждом PR
   - Запуск integration-тестов при необходимости
   - Запуск E2E-тестов при merge в main
   - Отчеты о покрытии кода

4. **Унифицированная конфигурация Maven**
   - Профиль `integration` добавлен в `femsq-web`
   - Профиль `ci` для отчетов о покрытии
   - Настройка Surefire/Failsafe плагинов

## Рекомендации по использованию

### Время запуска тестов

| Сценарий | Unit-тесты | Integration-тесты | E2E-тесты |
|----------|-----------|-------------------|-----------|
| **Локальная разработка** | Автоматически (`mvn test`) | Вручную при необходимости | Вручную перед релизом |
| **Перед коммитом** | Обязательно | Опционально | Нет |
| **При создании PR** | Автоматически (CI) | По требованию | Нет |
| **При merge в main** | Автоматически (CI) | Автоматически (CI) | Автоматически (CI) |
| **Ночные сборки** | Да | Да | Да |

### Команды для разработчиков

```bash
# Быстрая проверка (unit-тесты)
./code/scripts/test-unit.sh

# Полная проверка перед коммитом
./code/scripts/test-all.sh

# Проверка конкретного модуля
./code/scripts/test-unit.sh web
./code/scripts/test-integration.sh database
```

## Дальнейшие улучшения (опционально)

### 1. Теги JUnit 5 для категоризации
Добавить теги к тестам для более гибкого запуска:
```java
@Tag("unit")
@Tag("fast")
@Test
void testMethod() { ... }
```

Запуск по тегам:
```bash
mvn test -Dgroups=unit,fast
```

### 2. Pre-commit hooks
Автоматический запуск unit-тестов перед коммитом (через Git hooks)

### 3. Testcontainers для integration-тестов
Использовать Testcontainers для автоматического поднятия БД в тестах

### 4. Параллельный запуск тестов
Настроить параллельный запуск для ускорения

### 5. Отчеты о покрытии в CI
Интеграция с Codecov или Coveralls для отслеживания покрытия

## Файлы конфигурации

- `code/femsq-backend/femsq-web/pom.xml` - добавлены профили `integration` и `ci`
- `code/femsq-backend/femsq-database/pom.xml` - уже имеет профиль `integration`
- `.github/workflows/ci.yml` - CI/CD конфигурация
- `code/scripts/test-*.sh` - скрипты для запуска тестов
- `docs/development/notes/testing-strategy.md` - стратегия тестирования
- `code/scripts/README-TESTING.md` - инструкция по использованию


