# Резюме чата 25-1126 (libs)
**Дата:** 2025-11-26  
**Тема:** Постоянное хранение библиотек на машине клиента для FEMSQ Reports/Web

## Контекст
- Требовалось сократить объём обновлений: жирный JAR ~51 МБ (включает все зависимости) → цель — передавать только приложение.
- У клиента уже был установлен предыдущий JAR на Windows-машине; из него можно извлечь `BOOT-INF/lib` (≈52 МБ) штатными средствами (WinRAR).
- Запуск выполняется через `start.bat`, который добавляет `native-libs` (mssql-jdbc_auth.dll) в `PATH` для Windows Authentication SQL Server.

## Выполненные действия
1. **Разработана стратегия Thin JAR + внешние библиотеки**
   - Описаны шаги по извлечению `BOOT-INF/lib` из существующего JAR и хранению в постоянной папке `lib/` на машине клиента.
   - Подробно описано, как запускать новую версию через `java -Dloader.path=lib -jar femsq-web-0.1.0.1-SNAPSHOT-thin.jar`, сохранив поддержку `native-libs` в `PATH`.
2. **Подготовлен Thin JAR (704 КБ)**
   - Собран артефакт `code/femsq-backend/femsq-web/target/femsq-web-0.1.0.1-SNAPSHOT-thin.jar`, содержащий только код приложения.
3. **Документация и артефакты**
   - `docs/deployment/thin-jar-migration.md` — детальное руководство по миграции (этапы, скрипты, FAQ, контрольный список).
   - `docs/deployment/thin-jar-quick-start.md` — краткая инструкция и чек-лист развёртывания Thin JAR.
   - `code/scripts/README.md` — описание вспомогательных скриптов (build, extract, run) для автоматизации.
   - Скрипты: `code/scripts/build-thin-jar.sh`, `code/scripts/extract-libs-from-fatjar.sh`, `code/scripts/run-with-external-libs.sh`, `code/scripts/start-thin.bat` (для Windows-пускового сценария).
   - Отдельно зафиксированы указания по ручному развёртыванию без скриптов в ответе чата (WinRAR + правка `start.bat`).

## Результат
- Клиент может извлечь библиотеки из уже имеющегося Fat JAR один раз и далее получать только Thin JAR (~0.7 МБ) для обновлений, не повторяя передачу 50+ МБ зависимостей.
- Сценарий совместим с существующим `native-libs` и Windows Authentication.
- Все шаги документированы и готовы к использованию/обновлению.
