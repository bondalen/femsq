{
    "project": {
        "metadata": {
            "name": "FEMSQ",
            "version": "1.0.0",
            "description": "Cистема работы с контрагентами и объектами при капитальном строительстве на основе БД MS SQL Server FEMSQ (Fish Eye MS SQL Server)",
            "author": "Александр",
            "created": "2025-10-08",
            "lastUpdated": "2025-11-16",
            "status": "planning",
            "repository": "https://github.com/bondalen/femsq.git",
            "license": "MIT",
            "keywords": [
                "crm",
                "contractors",
                "management"
            ],
            "documentationRules": "docs/project-documentation-rules.md"
        },
        "architecture": {
            "type": "full-stack",
            "pattern": "modular-monolith",
            "pattern_decision": "docs/decisions/007-modular-monolith-pattern.md",
            "notes": "Приложение работает с уже существующей БД FishEye; создание или миграция схем выполняется сторонними процедурами (DBA).",
            "backend": {
                "framework": "Spring Boot 3.4.5",
                "language": "Java 21 LTS",
                "database": "MS SQL Server (внешняя)",
                "database_driver": "Microsoft SQL Server JDBC Driver 12.x",
                "api": "GraphQL",
                "security": "не разрабатывается - безопасная внутренняя сеть организации",
                "authentication": "без аутентификации пользователей",
                "migrations": "Liquibase (встроенные в JAR)",
                "monitoring": "Spring Boot Actuator"
            },
            "frontend": {
                "framework": "Vue.js 3.4.21",
                "language": "TypeScript 5.4.0",
                "ui": "Quasar Framework 2.16.1",
                "graphql": "Apollo Client",
                "build": "Vite",
                "maps": "Leaflet",
                "routing": "Vue Router",
                "state": "Pinia",
                "serving": "Spring Boot Static Resources",
                "deployment": "Встроен в Spring Boot JAR (единый артефакт)"
            },
            "infrastructure": {
                "database": "MS SQL Server (внешняя)",
                "monitoring": "Spring Boot Actuator",
                "ai": "MCP Servers",
                "deployment": "Spring Boot Fat JAR (Full-Stack: backend + frontend в едином JAR)",
                "ci_cd": {
                    "platform": "GitHub Actions",
                    "workflow": ".github/workflows/ci.yml",
                    "description": "Автоматический запуск тестов при PR и merge в main",
                    "jobs": [
                        {
                            "name": "unit-tests",
                            "trigger": "При каждом PR и push",
                            "description": "Запуск unit-тестов"
                        },
                        {
                            "name": "integration-tests",
                            "trigger": "При merge в main или по требованию [test-integration]",
                            "description": "Запуск integration-тестов с MS SQL Server в Docker"
                        },
                        {
                            "name": "e2e-tests",
                            "trigger": "При merge в main или по требованию [test-e2e]",
                            "description": "Запуск E2E-тестов Playwright"
                        },
                        {
                            "name": "code-coverage",
                            "trigger": "При merge в main",
                            "description": "Генерация отчетов о покрытии кода (JaCoCo)"
                        }
                    ]
                },
                "testing": {
                    "framework": "JUnit 5",
                    "unit_tests": {
                        "tool": "Maven Surefire Plugin",
                        "profile": "unit (по умолчанию)",
                        "pattern": "**/*Test.java",
                        "location": "src/test/java"
                    },
                    "integration_tests": {
                        "tool": "Maven Failsafe Plugin",
                        "profile": "integration",
                        "pattern": "**/*IT.java, **/*IntegrationTest.java",
                        "location": "src/test/java",
                        "requirements": "Переменные FEMSQ_DB_*"
                    },
                    "e2e_tests": {
                        "tool": "Playwright",
                        "location": "code/femsq-frontend/tests/e2e",
                        "requirements": "Запущенный backend на localhost:8080"
                    },
                    "coverage": {
                        "tool": "JaCoCo",
                        "profile": "ci",
                        "reports": "target/site/jacoco/index.html",
                        "minimum_coverage": "50%"
                    },
                    "scripts": {
                        "location": "code/scripts/",
                        "files": [
                            "test-unit.sh",
                            "test-integration.sh",
                            "test-all.sh",
                            "test-e2e.sh"
                        ],
                        "documentation": "code/scripts/README-TESTING.md"
                    },
                    "documentation": [
                        "docs/development/notes/testing-strategy.md",
                        "docs/development/notes/testing-recommendations.md",
                        "docs/development/notes/testing-improvements-summary.md"
                    ]
                }
            }
        },
        "features": {
            "core": [
                "Управление отношениями с контрагентами",
                "CRM функциональность",
                "Документооборот",
                "Управленческий финансовый учет"
            ],
            "advanced": [
                "Автоматическая генерация документов (PDF, Excel, CSV)",
                "Система отчетности",
                "Кэширование и оптимизация"
            ]
        },
        "modules": {
            "description": "Структура модулей проекта FEMSQ",
            "version": "1.0.0",
            "lastUpdated": "2025-11-12",
            "structure": {
                "type": "recursive",
                "entities": ["Module", "Component", "Class"],
                "organization": "single_file",
                "grouping": "artifact object for physical attributes"
            },
            "extensions": [
                "docs/project/extensions/modules/modules.json"
            ],
            "diagrams": [
                "docs/project/diagrams/database-module-classes.puml",
                "docs/project/diagrams/components.puml",
                "docs/project/diagrams/package-structure.puml"
            ]
        },
        "database": {
            "schema": "ags",
            "test_schema": "ags_test",
            "schemaManagement": "external",
            "version": "1.0.0",
            "engine": "MS SQL Server 2012+",
            "target_version": "11.0.7507.2 (2012 SP4)",
            "connection": {
                "type": "external",
                "driver": "com.microsoft.sqlserver.jdbc.SQLServerDriver",
                "url_template": "jdbc:sqlserver://{host}:{port};databaseName=FishEye;encrypt=false;trustServerCertificate=true"
            },
            "tables": [
                {
                    "name": "contractors",
                    "description": "Таблица контрагентов",
                    "columns": [
                        {
                            "name": "id",
                            "type": "UUID",
                            "constraints": "PRIMARY KEY DEFAULT gen_random_uuid()"
                        },
                        {
                            "name": "name",
                            "type": "VARCHAR(255)",
                            "constraints": "NOT NULL"
                        },
                        {
                            "name": "legal_name",
                            "type": "VARCHAR(255)",
                            "constraints": "NULL"
                        },
                        {
                            "name": "inn",
                            "type": "VARCHAR(12)",
                            "constraints": "UNIQUE NULL"
                        },
                        {
                            "name": "kpp",
                            "type": "VARCHAR(9)",
                            "constraints": "NULL"
                        },
                        {
                            "name": "email",
                            "type": "VARCHAR(255)",
                            "constraints": "NULL"
                        },
                        {
                            "name": "phone",
                            "type": "VARCHAR(50)",
                            "constraints": "NULL"
                        },
                        {
                            "name": "address",
                            "type": "TEXT",
                            "constraints": "NULL"
                        },
                        {
                            "name": "coordinates",
                            "type": "GEOMETRY(POINT, 4326)",
                            "constraints": "NULL"
                        },
                        {
                            "name": "status",
                            "type": "VARCHAR(50)",
                            "constraints": "NOT NULL DEFAULT 'active'"
                        },
                        {
                            "name": "created_at",
                            "type": "TIMESTAMP",
                            "constraints": "NOT NULL DEFAULT NOW()"
                        },
                        {
                            "name": "updated_at",
                            "type": "TIMESTAMP",
                            "constraints": "NOT NULL DEFAULT NOW()"
                        }
                    ],
                    "indexes": [
                        {
                            "name": "idx_contractors_inn",
                            "columns": [
                                "inn"
                            ],
                            "type": "UNIQUE"
                        },
                        {
                            "name": "idx_contractors_coordinates",
                            "columns": [
                                "coordinates"
                            ],
                            "type": "GIST"
                        },
                        {
                            "name": "idx_contractors_status",
                            "columns": [
                                "status"
                            ],
                            "type": "BTREE"
                        },
                        {
                            "name": "idx_contractors_name",
                            "columns": [
                                "name"
                            ],
                            "type": "BTREE"
                        }
                    ]
                },
                {
                    "name": "users",
                    "description": "Таблица пользователей системы",
                    "columns": [
                        {
                            "name": "id",
                            "type": "UUID",
                            "constraints": "PRIMARY KEY DEFAULT gen_random_uuid()"
                        },
                        {
                            "name": "username",
                            "type": "VARCHAR(100)",
                            "constraints": "UNIQUE NOT NULL"
                        },
                        {
                            "name": "email",
                            "type": "VARCHAR(255)",
                            "constraints": "UNIQUE NOT NULL"
                        },
                        {
                            "name": "password_hash",
                            "type": "VARCHAR(255)",
                            "constraints": "NOT NULL"
                        },
                        {
                            "name": "first_name",
                            "type": "VARCHAR(100)",
                            "constraints": "NULL"
                        },
                        {
                            "name": "last_name",
                            "type": "VARCHAR(100)",
                            "constraints": "NULL"
                        },
                        {
                            "name": "role",
                            "type": "VARCHAR(50)",
                            "constraints": "NOT NULL DEFAULT 'USER'"
                        },
                        {
                            "name": "is_active",
                            "type": "BOOLEAN",
                            "constraints": "NOT NULL DEFAULT true"
                        },
                        {
                            "name": "created_at",
                            "type": "TIMESTAMP",
                            "constraints": "NOT NULL DEFAULT NOW()"
                        },
                        {
                            "name": "updated_at",
                            "type": "TIMESTAMP",
                            "constraints": "NOT NULL DEFAULT NOW()"
                        }
                    ],
                    "indexes": [
                        {
                            "name": "idx_users_username",
                            "columns": [
                                "username"
                            ],
                            "type": "UNIQUE"
                        },
                        {
                            "name": "idx_users_email",
                            "columns": [
                                "email"
                            ],
                            "type": "UNIQUE"
                        },
                        {
                            "name": "idx_users_role",
                            "columns": [
                                "role"
                            ],
                            "type": "BTREE"
                        }
                    ]
                }
            ],
            "notes": "Схема ags поддерживается существующей БД; тестовая схема ags_test содержит копии таблиц для интеграционных тестов (og, ogAg).",
            "migrations": [
                {
                    "version": "001",
                    "description": "Initial schema creation",
                    "file": "001-initial-schema.xml",
                    "status": "planned",
                    "changes": [
                        "Create contractors table",
                        "Create users table",
                        "Create basic indexes"
                    ]
                },
                {
                    "version": "002",
                    "description": "Add additional tables for CRM functionality",
                    "file": "002-crm-tables.xml",
                    "status": "planned",
                    "changes": [
                        "Create documents table",
                        "Create contracts table",
                        "Add relationships between contractors and documents"
                    ]
                }
            ],
            "extensions": [
                "docs/project/extensions/database/connection-config.json",
                "docs/project/extensions/database/authentication-methods.json",
                "docs/project/extensions/database/migration-config.json",
                "docs/project/extensions/database/compatibility.json"
            ]
        },
        "development": {
            "setup": {
                "prerequisites": [
                    "Java 21 LTS",
                    "MS SQL Server (корпоративный или локальный)",
                    "Maven 3.9+",
                    "Git"
                ],
                "scripts": {
                    "dev": {
                        "command": "mvn spring-boot:run",
                        "description": "Запуск в режиме разработки",
                        "location": "code/femsq-backend",
                        "usage": "Локальная разработка с встроенной формой настройки"
                    },
                    "build": {
                        "command": "mvn clean package",
                        "description": "Сборка единого Full-Stack JAR-файла (backend + frontend)",
                        "location": "code",
                        "usage": "Создание production-ready JAR файла с встроенным frontend. Frontend собирается автоматически через frontend-maven-plugin."
                    },
                    "run": {
                        "command": "java -jar target/femsq-{version}.jar",
                        "description": "Запуск готового JAR-файла",
                        "location": "code/femsq-backend",
                        "usage": "Production запуск с внешней БД"
                    },
                    "test": {
                        "command": "mvn test",
                        "description": "Запуск unit-тестов (быстро, не требует БД)",
                        "location": "code/femsq-backend",
                        "usage": "Быстрое тестирование кода"
                    },
                    "testUnit": {
                        "command": "./code/scripts/test-unit.sh",
                        "description": "Запуск unit-тестов через скрипт",
                        "location": "project root",
                        "usage": "Удобный запуск unit-тестов"
                    },
                    "testIntegration": {
                        "command": "./code/scripts/test-integration.sh",
                        "description": "Запуск integration-тестов (требует переменные FEMSQ_DB_*)",
                        "location": "project root",
                        "usage": "Тестирование с реальной БД"
                    },
                    "testAll": {
                        "command": "./code/scripts/test-all.sh",
                        "description": "Запуск всех тестов (unit + integration)",
                        "location": "project root",
                        "usage": "Полная проверка перед коммитом"
                    },
                    "testE2E": {
                        "command": "./code/scripts/test-e2e.sh",
                        "description": "Запуск E2E-тестов Playwright (требует запущенный backend)",
                        "location": "project root",
                        "usage": "Тестирование UI через браузер"
                    },
                    "testWithCoverage": {
                        "command": "mvn test -Pci",
                        "description": "Запуск unit-тестов с генерацией отчета о покрытии кода",
                        "location": "code/femsq-backend",
                        "usage": "Анализ покрытия кода тестами"
                    },
                    "setJavaHome": {
                        "command": "source code/scripts/setup-java-home.sh",
                        "description": "Определяет JAVA_HOME на основе установленного JDK",
                        "location": "project root",
                        "usage": "Подготовка окружения перед запуском Maven"
                    },
                    "seedTestData": {
                        "command": "/opt/mssql-tools/bin/sqlcmd -S localhost,1433 -U sa -P $FEMSQ_DB_PASSWORD -i code/config/sql/ags_test_seed.sql",
                        "description": "Создаёт тестовые таблицы ags_test.og/ogAg и наполняет их данными",
                        "location": "project root",
                        "usage": "Подготовка тестовой базы перед интеграционными тестами"
                    }
                },
                "repositoryStructure": [
                    {
                        "path": "code/femsq-backend",
                        "description": "Backend на Spring Boot и подмодули (database, web)"
                    },
                    {
                        "path": "code/femsq-frontend",
                        "description": "Frontend на Vue.js/Quasar"
                    },
                    {
                        "path": "code/scripts",
                        "description": "Папка для вспомогательных скриптов разработки и автоматизации"
                    },
                    {
                        "path": "code/config",
                        "description": "Конфигурационные шаблоны и параметры окружения"
                    }
                ],
                "environmentVariables": [
                    {
                        "name": "FEMSQ_DB_PASSWORD",
                        "scope": "local",
                        "description": "Пароль пользователя MS SQL Server для интеграционных тестов и ConnectionFactory",
                        "storage": "экспорт в shell / менеджер секретов, не хранить в репозитории"
                    },
                    {
                        "name": "FEMSQ_DB_HOST",
                        "scope": "optional",
                        "description": "Хост MS SQL Server (по умолчанию localhost)",
                        "storage": "настройка через shell"
                    },
                    {
                        "name": "FEMSQ_DB_PORT",
                        "scope": "optional",
                        "description": "Порт MS SQL Server (по умолчанию 1433)",
                        "storage": "настройка через shell"
                    },
                    {
                        "name": "FEMSQ_DB_NAME",
                        "scope": "optional",
                        "description": "Имя базы данных (по умолчанию FishEye)",
                        "storage": "настройка через shell"
                    },
                    {
                        "name": "FEMSQ_DB_USER",
                        "scope": "optional",
                        "description": "Пользователь базы данных для режима credentials (по умолчанию sa)",
                        "storage": "настройка через shell"
                    },
                    {
                        "name": "FEMSQ_DB_AUTH_MODE",
                        "scope": "optional",
                        "description": "Режим аутентификации (credentials/windows-integrated/kerberos)",
                        "storage": "настройка через shell"
                    }
                ]
            },
            "environments": {
                "description": "Машины разработки с порядком приоритета подключения. При начале работы AI проверяет машины в порядке check_order и использует первую подходящую.",
                "check_order": [
                    "workstation-fedora",
                    "home-windows"
                ],
                "machines": {
                    "workstation-fedora": {
                        "name": "Основная рабочая машина",
                        "hostname_pattern": ".*fedora.*|.*workstation.*|.*User-PC.*",
                        "os_pattern": ".*Fedora.*|.*Linux.*|.*Ubuntu.*",
                        "priority": 1,
                        "database": {
                            "type": "docker",
                            "container_name": "vuege-mssql",
                            "host": "localhost",
                            "port": 1433,
                            "database": "Fish_Eye",
                            "username": "sa",
                            "password": "kolob_OK1",
                            "connection_string": "sqlserver://sa:kolob_OK1@localhost:1433/Fish_Eye?sslmode=disable&encrypt=false&trustServerCertificate=true",
                            "check_commands": {
                                "container_status": "docker ps --filter name=vuege-mssql --format '{{.Status}}'",
                                "port_check": "timeout 2 bash -c 'cat < /dev/null > /dev/tcp/localhost/1433' 2>&1"
                            }
                        },
                        "dbhub": {
                            "type": "local",
                            "path": ".cursor/dbhub",
                            "package": "@bytebase/dbhub",
                            "version": "latest",
                            "install_command": "npm install @bytebase/dbhub --prefix .cursor/dbhub",
                            "entry_point": ".cursor/dbhub/node_modules/@bytebase/dbhub/dist/index.js"
                        },
                        "notes": "Основная машина разработки, SQL Server в Docker контейнере vuege-mssql"
                    },
                    "home-windows": {
                        "name": "Домашняя машина",
                        "hostname_pattern": ".*home.*|.*windows.*",
                        "os_pattern": ".*Windows.*",
                        "priority": 2,
                        "database": {
                            "type": "local_service",
                            "service_name": "MSSQLSERVER",
                            "host": "localhost",
                            "port": 1433,
                            "database": "FishEye",
                            "username": "sa",
                            "password": "kolob_OK1",
                            "connection_string": "sqlserver://sa:kolob_OK1@localhost:1433/FishEye?sslmode=disable&encrypt=false&trustServerCertificate=true",
                            "check_commands": {
                                "service_status": "powershell.exe -Command \"Get-Service -Name MSSQLSERVER | Select-Object -ExpandProperty Status\"",
                                "port_check": "netstat -an | findstr :1433"
                            }
                        },
                        "dbhub": {
                            "type": "local",
                            "path": ".cursor/dbhub",
                            "package": "@bytebase/dbhub",
                            "version": "latest",
                            "install_command": "npm install @bytebase/dbhub --prefix .cursor/dbhub",
                            "entry_point": ".cursor/dbhub/node_modules/@bytebase/dbhub/dist/index.js"
                        },
                        "notes": "Домашняя машина, SQL Server как служба Windows"
                    }
                },
                "detection": {
                    "method": "auto",
                    "fallback": "ask_user",
                    "checks": [
                        "hostname",
                        "os",
                        "database_container",
                        "database_service"
                    ]
                }
            },
            "standards": {
                "codeStyle": "Google Java Style + ESLint/Prettier",
                "gitFlow": "GitHub Flow",
                "testing": "JUnit 5 + Vue Test Utils",
                "documentation": "JSON + Markdown + ADR",
                "api": "GraphQL-first"
            }
        },
        "deployment": {
            "strategy": "Единый JAR-файл с веб-интерфейсом настройки БД",
            "architecture": {
                "type": "monolithic",
                "deployment_type": "fat-jar-corporate-network"
            },
            "environments": {
                "frontend": "http://localhost:8080 (встроенный в JAR, подтверждено 2025-11-14)",
                "backend": "http://localhost:8080",
                "api": "http://localhost:8080/api/v1",
                "graphql": "http://localhost:8080/graphql",
                "note": "Frontend и backend работают на одном порту (8080), единый JAR-файл"
            },
            "configuration": {
                "jar_name": "femsq-{version}.jar",
                "startup_command": "java -jar femsq-{version}.jar"
            },
            "extensions": [
                "docs/project/extensions/deployment/deployment-config.json",
                "docs/project/extensions/deployment/environments.json",
                "docs/project/extensions/deployment/security-config.json"
            ]
        },
        
        "ui": {
            "setup_interface": {
                "url": "/setup",
                "title": "Настройка подключения к базе данных FEMSQ",
                "description": "Веб-интерфейс для настройки подключения к MS SQL Server"
            },
            "main_application": {
                "url": "/",
                "title": "FEMSQ - Система работы с контрагентами"
            },
            "extensions": [
                "docs/project/extensions/ui/setup-forms.json",
                "docs/project/extensions/ui/status-pages.json",
                "docs/project/extensions/ui/user-experience.json"
            ]
        },
        
        "network": {
            "type": "controlled_corporate_network",
            "authentication_methods": [
                "integrated_security",
                "trusted_connection",
                "username_password"
            ],
            "extensions": [
                "docs/project/extensions/network/corporate-network.json",
                "docs/project/extensions/network/connection-detection.json"
            ]
        },
        
        "security": {
            "scope": "internal_secure_network",
            "description": "Проект предназначен для работы в безопасной внутренней сети организации",
            "user_authentication": "не требуется",
            "data_encryption": "не требуется",
            "password_encryption": "не требуется (хранение в plain text допустимо)",
            "network_security": "обеспечивается инфраструктурой организации",
            "assumptions": [
                "Приложение работает в защищенной корпоративной сети",
                "Доступ к серверу БД ограничен на уровне сети",
                "Пользователи имеют доверенный доступ",
                "Файлы конфигурации защищены правами ОС (chmod 600)"
            ]
        },
        
        "monitoring": {
            "health_checks": true,
            "logging": "file-rotation",
            "backup": "daily-database",
            "extensions": [
                "docs/project/extensions/monitoring/logging-config.json",
                "docs/project/extensions/monitoring/health-checks.json"
            ]
        },
        "timeline": {
            "phases": [
                {
                    "name": "Phase 1: Foundation",
                    "duration": "2 weeks",
                    "startDate": "2025-01-27",
                    "tasks": [
                        "Настройка инфраструктуры",
                        "Базовая архитектура Backend",
                        "Базовая архитектура Frontend",
                        "Настройка БД и миграций",
                        "Создание JSON-документации"
                    ],
                    "status": "in_progress",
                    "progress": 20
                },
                {
                    "name": "Phase 2: Core Features",
                    "duration": "4 weeks",
                    "startDate": "2025-02-10",
                    "tasks": [
                        "Модуль управления отношениями с контрагентами",
                        "Система аутентификации",
                        "Базовый UI/UX",
                        "API интеграция Frontend-Backend"
                    ],
                    "status": "planned",
                    "progress": 0
                },
                {
                    "name": "Phase 3: Advanced Features",
                    "duration": "3 weeks",
                    "startDate": "2025-03-10",
                    "tasks": [
                        "ГИС-аналитика",
                        "Документооборот",
                        "Система уведомлений",
                        "Интеграции с внешними API"
                    ],
                    "status": "planned",
                    "progress": 0
                }
            ]
        },
        "quality": {
            "lastUpdated": "2025-11-11",
            "checkpoints": [
                {
                    "id": "K1",
                    "name": "Контрольная точка K1 - Backend API",
                    "date": "2025-11-11",
                    "status": "completed",
                    "description": "Backend REST/GraphQL API подтверждён интеграционным тестом ApiOrganizationsSuccessIT и ручной проверкой через временный database.properties.",
                    "verification": {
                        "automatedTests": [
                            "ApiOrganizationsSuccessIT (Spring Boot, JUnit 5)"
                        ],
                        "manualSteps": [
                            "GET /api/v1/organizations",
                            "GET /api/v1/agents",
                            "POST /graphql { organizations { ogKey ogName } }"
                        ]
                    },
                    "links": {
                        "projectDocsRefs": [
                            "module:backend.web",
                            "component:backend.web.api.rest",
                            "component:backend.web.api.graphql"
                        ],
                        "developmentTasks": [
                            "task:0017"
                        ],
                        "journalRefs": [
                            "log:log-2025-11-11-001"
                        ]
                    }
                }
            ],
            "tests": [
                {
                    "name": "ApiOrganizationsSuccessIT",
                    "type": "integration",
                    "scope": [
                        "REST /api/v1/organizations",
                        "REST /api/v1/agents",
                        "GraphQL organizations query"
                    ],
                    "environment": "Схема ags_test, временный каталог user.home с database.properties",
                    "automation": "JUnit 5 @SpringBootTest + TestRestTemplate",
                    "manualMode": {
                        "enabled": true,
                        "timeoutMinutes": 3,
                        "stopFile": "/tmp/femsq-api-stop"
                    },
                    "links": {
                        "source": "code/femsq-backend/femsq-web/src/test/java/com/femsq/web/api/rest/ApiOrganizationsSuccessIT.java",
                        "journalRefs": [
                            "log:log-2025-11-11-001"
                        ],
                        "developmentTasks": [
                            "task:0017"
                        ]
                    }
                }
            ]
        },
        "risks": [
            {
                "id": "R001",
                "description": "Сложность интеграции с внешними API",
                "probability": "medium",
                "impact": "high",
                "mitigation": "Поэтапная интеграция с тестированием",
                "status": "monitoring"
            },
            {
                "id": "R002",
                "description": "Производительность при работе с большими объемами данных",
                "probability": "low",
                "impact": "medium",
                "mitigation": "Оптимизация запросов и кэширование",
                "status": "monitoring"
            }
        ],
        "problems": [
            {
                "id": "P-2025-11-16-001",
                "title": "Spring GraphQL: нестабильность интеграционных тестов (404 при запуске всего модуля)",
                "status": "known_issue",
                "discovered": "2025-11-15",
                "lastUpdated": "2025-11-16",
                "modules": [
                    "femsq-backend/femsq-web"
                ],
                "scope": [
                    "Интеграционные тесты GraphQL",
                    "Spring Boot 3.4.5",
                    "Spring GraphQL 1.3.5"
                ],
                "description": "GraphQL endpoint стабильно работает в production и при изолированном запуске тестового класса, но при запуске всех интеграционных тестов модуля возвращает 404 (endpoint не регистрируется). Проблема воспроизводится независимо от задержек/ретраев и аннотаций изоляции контекста.",
                "reproduction": [
                    "mvn -Pintegration -pl femsq-backend/femsq-web verify",
                    "Падает тест GraphQL: 404 после нескольких ретраев"
                ],
                "attemptedSolutions": [
                    "@DirtiesContext (BEFORE_CLASS/AFTER_CLASS/AFTER_EACH_TEST_METHOD) — не помогло",
                    "Задержка 2с + 10 ретраев по 1с — не помогло",
                    "Изменение порядка выполнения (имя класса, @Order) — Maven Failsafe игнорирует порядок",
                    "Вынос теста в отдельный класс и модуль — в модуле возникли конфликты зависимостей Spring (BeanFactoryInitializer)"
                ],
                "currentWorkaround": "Тесты GraphQL отключены (@Disabled) в модуле femsq-web. Функциональность GraphQL подтверждена вручную и изолированными запусками.",
                "impact": {
                    "severity": "medium",
                    "areas": ["интеграционные тесты GraphQL"],
                    "notes": "Не влияет на production, но снижает автоматизированное покрытие GraphQL."
                },
                "recommendations": [
                    "Добавить slice-тесты @GraphQlTest для контроллера OgGraphqlController",
                    "Рассмотреть отдельный тестовый модуль только для GraphQL с корректной компоновкой зависимостей",
                    "Отслеживать обновления Spring Boot/GraphQL и перепроверять проблему при следующем обновлении",
                    "Альтернатива: E2E-проверка GraphQL через Playwright на живом приложении"
                ],
                "links": {
                    "plan": "docs/development/notes/chats/chat-plan/chat-plan-25-1115.md",
                    "tests": [
                        "code/femsq-backend/femsq-web/src/test/java/com/femsq/web/api/rest/ApiOrganizationsSuccessIT.java",
                        "code/femsq-backend/femsq-web/src/test/java/com/femsq/web/api/graphql/AGraphqlOrganizationsIT.java"
                    ],
                    "commits": [],
                    "issues": []
                }
            }
        ],
        "resources": {
            "team": [
                {
                    "role": "Full-stack Developer",
                    "name": "Александр",
                    "responsibilities": [
                        "Backend",
                        "Frontend",
                        "DevOps",
                        "Database",
                        "Architecture"
                    ],
                    "skills": [
                        "Java",
                        "Vue.js",
                        "MS SQL Server",
                        "GraphQL"
                    ]
                }
            ],
            "budget": {
                "development": "0 (open-source)",
                "hosting": "estimated $50/month",
                "tools": "0 (free tools)",
                "total": "estimated $50/month"
            },
            "tools": [
                "Cursor",
                "GitHub"
            ],
            "documentation": {
                "main": "docs",
                "journal": "docs/journal/project-journal.json"
            }
        }
    }
}