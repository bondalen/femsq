title Модуль Database - Диаграмма классов

package "com.femsq.database" {
  
  package "config" <<Rectangle>> {
    class DatabaseConfigurationService {
      + loadConfig(): DatabaseConfigurationProperties
      + saveConfig(props): void
    }
    
    class ConfigurationFileManager {
      + resolveConfigPath(): Path
      + loadProperties(): Properties
      + writeProperties(props): void
    }
    
    class ConfigurationValidator {
      + map(props: Properties): DatabaseConfigurationProperties
      + validate(props: DatabaseConfigurationProperties): void
    }
    
    class DatabaseConfigurationProperties {
      + host: String
      + port: Integer
      + database: String
      + username: String
      + password: String
      + authMode: String
    }
  }
  
  package "connection" <<Rectangle>> {
    class ConnectionFactory {
      + createConnection(): Connection
      + createConnection(provider): Connection
      + testConnection(timeoutSeconds: int): boolean
      + close(): void
    }
    
    interface JdbcConnector {
      + connect(url: String, props: Properties): Connection
      + close(): void
    }
    
    class HikariJdbcConnector {
      - dataSource: HikariDataSource
    }
    
    class ConnectionFactoryException
  }
  
  package "auth" <<Rectangle>> {
    interface AuthenticationProvider {
      + buildProperties(config): Properties
      + getName(): String
    }
    
    class CredentialsAuthenticationProvider
    class WindowsIntegratedAuthenticationProvider
    class KerberosAuthenticationProvider
    
    class AuthenticationProviderFactory {
      + create(config): AuthenticationProvider
      + withDefaults(): AuthenticationProviderFactory
    }
  }
}

DatabaseConfigurationService --> ConfigurationFileManager
DatabaseConfigurationService --> ConfigurationValidator
ConfigurationValidator --> DatabaseConfigurationProperties

ConnectionFactory --> DatabaseConfigurationService
ConnectionFactory --> AuthenticationProviderFactory
ConnectionFactory --> AuthenticationProvider
ConnectionFactory --> JdbcConnector
ConnectionFactory --> ConnectionFactoryException : throws
HikariJdbcConnector ..|> JdbcConnector

AuthenticationProviderFactory --> AuthenticationProvider
CredentialsAuthenticationProvider ..|> AuthenticationProvider
WindowsIntegratedAuthenticationProvider ..|> AuthenticationProvider
KerberosAuthenticationProvider ..|> AuthenticationProvider

@enduml
